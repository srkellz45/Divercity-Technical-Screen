{"ast":null,"code":"import _objectSpread from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/Onboarding/UploadProfilePhoto/index.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Dropzone from 'react-dropzone';\nimport TempHeader from '../../../components/TempHeader.js';\nimport { getUser as _getUser } from '../../../actions/user.actions';\nimport { uploadProfilePicture as _uploadProfilePicture } from '../../../actions/onboard.actions';\nimport UserPhoto from '../../../assets/UserPhoto.png';\nimport Modal from '../../Modal';\n\nvar UploadProfilePhoto =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UploadProfilePhoto, _React$Component);\n\n  function UploadProfilePhoto(props) {\n    var _this;\n\n    _classCallCheck(this, UploadProfilePhoto);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UploadProfilePhoto).call(this, props));\n\n    _this.closeModal = function () {\n      _this.props.closeModal();\n    };\n\n    _this.deletePhoto = function (evt) {\n      evt.preventDefault();\n\n      _this.setState({\n        files: []\n      });\n    };\n\n    _this.uploadFile = function (evt) {\n      if (evt.target.files && evt.target.files[0]) {\n        var reader = new FileReader();\n\n        reader.onload = function (e) {\n          var files = e.target.result; //resize image\n\n          var img = document.createElement(\"img\");\n\n          img.onload = function () {\n            var canvas = document.createElement('canvas');\n            var ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            var MAX_WIDTH = 160;\n            var MAX_HEIGHT = 160;\n            var width = img.width;\n            var height = img.height;\n\n            if (width > height) {\n              if (width > MAX_WIDTH) {\n                height *= MAX_WIDTH / width;\n                width = MAX_WIDTH;\n              }\n            } else {\n              if (height > MAX_HEIGHT) {\n                width *= MAX_HEIGHT / height;\n                height = MAX_HEIGHT;\n              }\n            }\n\n            canvas.width = width;\n            canvas.height = height;\n            ctx.drawImage(img, 0, 0, width, height);\n            var dataUrl = canvas.toDataURL(\"image/png\");\n\n            _this.props.uploadProfilePicture(dataUrl);\n          };\n\n          img.src = e.target.result;\n        };\n\n        reader.readAsDataURL(evt.target.files[0]);\n      }\n    };\n\n    _this.onDrop = function (files) {\n      _this.setState({\n        files: files.map(function (file) {\n          return _objectSpread({}, file, {\n            preview: URL.createObjectURL(file),\n            size: file.size\n          });\n        })\n      });\n    };\n\n    _this.state = {\n      files: [],\n      document: []\n    };\n    return _this;\n  }\n\n  _createClass(UploadProfilePhoto, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getUser(localStorage.id);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Revoke the data uris to avoid memory leaks\n      var files = this.state.files;\n\n      if (files.length) {\n        for (var i = files.length; i >= 0; i--) {\n          var file = files[0];\n          URL.revokeObjectURL(file.preview);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.state.files);\n      return React.createElement(\"div\", {\n        className: \"Photo-Upload-Form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Photo-Upload-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: UserPhoto,\n        alt: \"User Upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"Photo-Upload-headline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Please add a face to go \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), \"with your wonderful name\", React.createElement(\"div\", {\n        className: \"Photo-Upload-subline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Profile Pics humanize your experience more.\")), React.createElement(Dropzone, {\n        className: \"Photo-Upload-dropzone\",\n        accept: \"image/png, image/jpeg\",\n        maxSize: 3000000,\n        onDrop: this.onDrop,\n        onChange: this.uploadFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, function (_ref) {\n        var isDragAccept = _ref.isDragAccept,\n            isDragReject = _ref.isDragReject,\n            acceptedFiles = _ref.acceptedFiles,\n            rejectedFiles = _ref.rejectedFiles;\n\n        if (acceptedFiles.length) {\n          // Passes all checks!\n          return React.createElement(\"div\", {\n            className: \"Photo-Upload-success-upload\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"Photo-Upload-sucess-text\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112\n            },\n            __self: this\n          }, \"You look great!\"));\n        }\n\n        if (rejectedFiles.length) {\n          if (rejectedFiles[0].size > 3000000) {\n            // Less than 3MB\n            return React.createElement(\"div\", {\n              className: \"error-upload\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 119\n              },\n              __self: this\n            }, \"Please make sure the\", React.createElement(\"br\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 120\n              },\n              __self: this\n            }), \"file size is smaller than 3MB \");\n          }\n\n          return React.createElement(\"div\", {\n            className: \"error-upload\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }, \"Please upload JPEG or PNG format\");\n        } // Wrong file-type\n\n\n        if (isDragAccept) {\n          return React.createElement(\"div\", {\n            className: \"success-drag\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            },\n            __self: this\n          }, \" + \");\n        } // Show a PLUS sign in drag area if correct size & type\n\n\n        if (isDragReject) {\n          return React.createElement(\"div\", {\n            className: \"error-upload\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, \"Please upload JPEG or PNG format\");\n        } // Show this if it's wrong format\n        else {\n            return React.createElement(\"div\", {\n              className: \"photo-upload-buttons\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 135\n              },\n              __self: this\n            }, React.createElement(\"button\", {\n              className: \"Photo-Upload-btn\",\n              type: \"button\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 136\n              },\n              __self: this\n            }, \"Add one now!\"));\n          }\n      }), this.state.files.length > 0 && React.createElement(\"div\", {\n        className: \"Photo-Upload-Preview\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Photo-Upload-thumbsContainer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Photo-Upload-thumb\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"Photo-Upload-thumbInner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.files[0].preview,\n        alt: \"upload\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })))), React.createElement(\"button\", {\n        className: \"Photo-Upload-sucess-btn\",\n        onClick: this.closeModal,\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Done\")), !this.state.files.length && React.createElement(\"div\", {\n        className: \"Photo-Upload-skip\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Maybe later\"));\n    }\n  }]);\n\n  return UploadProfilePhoto;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.userList\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getUser: function getUser(ID) {\n      dispatch(_getUser(ID));\n    },\n    uploadProfilePicture: function uploadProfilePicture(image) {\n      dispatch(_uploadProfilePicture(image));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadProfilePhoto);","map":{"version":3,"sources":["/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/Onboarding/UploadProfilePhoto/index.js"],"names":["React","connect","Dropzone","TempHeader","getUser","uploadProfilePicture","UserPhoto","Modal","UploadProfilePhoto","props","closeModal","deletePhoto","evt","preventDefault","setState","files","uploadFile","target","reader","FileReader","onload","e","result","img","document","createElement","canvas","ctx","getContext","drawImage","MAX_WIDTH","MAX_HEIGHT","width","height","dataUrl","toDataURL","src","readAsDataURL","onDrop","map","file","preview","URL","createObjectURL","size","state","localStorage","id","length","i","revokeObjectURL","console","log","isDragAccept","isDragReject","acceptedFiles","rejectedFiles","Component","mapStateToProps","user","userList","mapDispatchToProps","dispatch","ID","image"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport Dropzone from 'react-dropzone';\nimport TempHeader from '../../../components/TempHeader.js';\nimport { getUser } from '../../../actions/user.actions';\nimport { uploadProfilePicture } from '../../../actions/onboard.actions';\nimport UserPhoto from '../../../assets/UserPhoto.png';\nimport Modal from '../../Modal';\n\nclass UploadProfilePhoto extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      files: [],\n      document: [],\n    };\n  }\n  componentDidMount() {\n    this.props.getUser(localStorage.id);\n  }\n  componentWillUnmount() {\n    // Revoke the data uris to avoid memory leaks\n    const { files } = this.state;\n    if(files.length){\n      for (let i = files.length; i >= 0; i--) {\n        const file = files[0];\n        URL.revokeObjectURL(file.preview);\n      }\n    }\n  }\n\n  closeModal = () => {\n    this.props.closeModal();\n  }\n  deletePhoto = (evt) => {\n    evt.preventDefault();\n    this.setState({\n      files: [],\n    });\n  };\n  uploadFile = (evt) => {\n    if (evt.target.files && evt.target.files[0]) {\n      let reader = new FileReader();\n      reader.onload = (e) => {\n        var files = e.target.result;\n        //resize image\n        var img = document.createElement(\"img\");\n        img.onload = () => {\n          let canvas = document.createElement('canvas');\n          let ctx = canvas.getContext(\"2d\");\n          ctx.drawImage(img, 0, 0);\n          let MAX_WIDTH = 160;\n          let MAX_HEIGHT = 160;\n          let width = img.width;\n          let height = img.height;\n          if (width > height) {\n            if (width > MAX_WIDTH) {\n              height *= MAX_WIDTH / width;\n              width = MAX_WIDTH;\n            }\n          } else {\n            if (height > MAX_HEIGHT) {\n              width *= MAX_HEIGHT / height;\n              height = MAX_HEIGHT;\n            }\n          }\n          canvas.width = width;\n          canvas.height = height;\n          ctx.drawImage(img, 0, 0, width, height);    \n          let dataUrl = canvas.toDataURL(\"image/png\");   \n          this.props.uploadProfilePicture(dataUrl);\n        }\n        img.src = e.target.result;\n      };\n    reader.readAsDataURL(evt.target.files[0]);\n   }\n  };\n  onDrop = (files) => {\n    this.setState({\n      files: files.map(file => ({\n        ...file,\n        preview: URL.createObjectURL(file),\n        size: file.size,\n      }))\n    });\n  }\n  render() {\n    console.log(this.state.files);\n    return (\n        <div className=\"Photo-Upload-Form\">\n          <div className=\"Photo-Upload-image\">\n            <img src={ UserPhoto } alt=\"User Upload\" />\n          </div>\n          <div className=\"Photo-Upload-headline\">\n            Please add a face to go <br />\n            with your wonderful name\n            <div className=\"Photo-Upload-subline\">\n              Profile Pics humanize your experience more.\n            </div>\n          </div>\n          <Dropzone\n            className=\"Photo-Upload-dropzone\"\n            accept=\"image/png, image/jpeg\"\n            maxSize={ 3000000 }\n            onDrop={ this.onDrop }\n            onChange={ this.uploadFile }\n          >\n            {({ isDragAccept, isDragReject, acceptedFiles, rejectedFiles }) => {\n              if (acceptedFiles.length) { // Passes all checks!\n                return(\n                  <div className=\"Photo-Upload-success-upload\">\n                    <div className=\"Photo-Upload-sucess-text\">\n                      You look great!\n                    </div>\n                  </div>\n                )}\n              if (rejectedFiles.length) {\n                  if (rejectedFiles[0].size > 3000000) { // Less than 3MB\n                    return <div className=\"error-upload\">\n                      Please make sure the<br />\n                      file size is smaller than 3MB </div>\n                  }\n                return <div className=\"error-upload\">\n                  Please upload JPEG or PNG format</div>\n              } // Wrong file-type\n              if (isDragAccept) {\n                return <div className=\"success-drag\"> + </div>\n              } // Show a PLUS sign in drag area if correct size & type\n              if (isDragReject) {\n                return <div className=\"error-upload\">\n                Please upload JPEG or PNG format</div>\n              } // Show this if it's wrong format\n              else {\n                return (\n                  <div className=\"photo-upload-buttons\">\n                    <button\n                     className=\"Photo-Upload-btn\"\n                     type=\"button\"\n                    >\n                     Add one now!\n                    </button>\n                  </div>\n                )\n              }\n            }}\n          </Dropzone>\n          { this.state.files.length > 0 && (\n            <div className=\"Photo-Upload-Preview\">\n              <div className=\"Photo-Upload-thumbsContainer\">\n                <div className=\"Photo-Upload-thumb\">\n                  <div id=\"Photo-Upload-thumbInner\">\n                    <img\n                     src={this.state.files[0].preview}\n                     alt=\"upload\"\n                    />\n                  </div>\n                </div>\n              </div>\n              <button\n                 className=\"Photo-Upload-sucess-btn\"\n                 onClick={this.closeModal}\n                 type=\"button\"\n                >\n                 Done\n              </button>\n            </div>\n\n          )}\n          { !this.state.files.length && (\n          <div className=\"Photo-Upload-skip\" onClick={this.closeModal}>\n            Maybe later\n          </div>\n          )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    user: state.userList\n  }\n}\n\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getUser: (ID) => {\n      dispatch(getUser(ID))\n    },\n    uploadProfilePicture: (image) => {\n      dispatch(uploadProfilePicture(image))\n    },\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(UploadProfilePhoto);\n\n\n\n"]},"metadata":{},"sourceType":"module"}