{"ast":null,"code":"import Axios from 'axios';\nimport { url } from '../lib/url';\nimport history from '../history';\nimport { toast } from \"react-toastify\";\nvar chatURL = \"\".concat(url, \"users/\");\nvar sendMessageURL = \"\".concat(url, \"messages\");\nvar initChatURL = \"\".concat(url, \"users/\");\nvar allChatsURL = \"\".concat(url, \"users/\");\nexport var ERROR = 'ERROR';\nexport var CREATE_CHAT_ID = 'CREATE_CHAT_ID';\nexport var LOAD_CHAT = 'LOAD_CHAT';\nexport var ALL_CHATS = 'ALL_CHATS';\n\nvar headers = function headers() {\n  return {\n    'access-token': localStorage.getItem('access-token'),\n    uid: localStorage.getItem('uid'),\n    client: localStorage.getItem('client'),\n    id: localStorage.getItem('id')\n  };\n};\n\nexport var getAllChats = function getAllChats(myID) {\n  return function (dispatch) {\n    Axios.get(allChatsURL + myID + \"/chats\", {\n      headers: headers()\n    }).then(function (chat) {\n      return dispatch({\n        type: ALL_CHATS,\n        chats: chat.data.data\n      });\n    }).catch(function (err) {\n      toast.error(\"Something went wrong\", {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true\n      });\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var loadChat = function loadChat(myID, chatID, otherID) {\n  return function (dispatch) {\n    return Axios({\n      method: 'get',\n      url: chatURL + myID + \"/chats/\" + chatID + \"?other_user=\" + otherID,\n      headers: headers()\n    }).then(function (chat) {\n      dispatch({\n        type: LOAD_CHAT,\n        chat: chat.data.data\n      });\n    }).catch(function (err) {\n      toast.error(\"Something went wrong\", {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true\n      });\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var createChatID = function createChatID(myID, otherUser) {\n  return function (dispatch) {\n    return Axios({\n      method: 'post',\n      url: initChatURL + \"\".concat(myID, \"/chats?other_user=\").concat(otherUser),\n      headers: headers()\n    }).then(function (response) {\n      dispatch({\n        type: CREATE_CHAT_ID,\n        chatID: response.data.data\n      });\n      return Axios({\n        method: 'get',\n        url: chatURL + myID + \"/chats/\" + response.data.data.id + \"?other_user=\" + otherUser,\n        headers: headers()\n      });\n    }).then(function (chat) {\n      dispatch({\n        type: LOAD_CHAT,\n        chat: chat.data.data\n      });\n    }).catch(function (err) {\n      toast.error(\"Something went wrong\", {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true\n      });\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var sendNewMessage = function sendNewMessage(message, chatID) {\n  return function (dispatch) {\n    return Axios({\n      method: 'post',\n      url: sendMessageURL,\n      headers: headers(),\n      data: {\n        message: {\n          content: message,\n          chat_id: chatID\n        }\n      }\n    }).then(function (data) {// dispatch({\n      //   type: LOAD_JOBS,\n      //   jobs: jobs.data.data\n      // });\n    }).catch(function (err) {\n      toast.error(\"Something went wrong\", {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true\n      });\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var sendFirstMessage = function sendFirstMessage(message, chatID) {\n  return function (dispatch) {\n    return Axios({\n      method: 'post',\n      url: sendMessageURL,\n      headers: headers(),\n      data: {\n        message: {\n          content: message,\n          chat_id: chatID\n        }\n      }\n    }).then(function (data) {\n      history.push(\"/messages\"); // dispatch({\n      //   type: LOAD_JOBS,\n      //   jobs: jobs.data.data\n      // });\n    }).catch(function (err) {\n      toast.error(\"Something went wrong\", {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true\n      });\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/actions/chat.actions.js"],"names":["Axios","url","history","toast","chatURL","sendMessageURL","initChatURL","allChatsURL","ERROR","CREATE_CHAT_ID","LOAD_CHAT","ALL_CHATS","headers","localStorage","getItem","uid","client","id","getAllChats","myID","dispatch","get","then","chat","type","chats","data","catch","err","error","position","POSITION","TOP_CENTER","hideProgressBar","pauseOnHover","console","log","loadChat","chatID","otherID","method","createChatID","otherUser","response","sendNewMessage","message","content","chat_id","sendFirstMessage","push"],"mappings":"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","sourcesContent":["import Axios from 'axios';\nimport { url } from '../lib/url';\nimport history from '../history';\nimport { toast } from \"react-toastify\";\nlet chatURL = `${url}users/`;\nlet sendMessageURL = `${url}messages`;\nlet initChatURL = `${url}users/`;\nlet allChatsURL = `${url}users/`;\n\nexport const ERROR = 'ERROR';\nexport const CREATE_CHAT_ID = 'CREATE_CHAT_ID';\nexport const LOAD_CHAT = 'LOAD_CHAT';\nexport const ALL_CHATS = 'ALL_CHATS';\n\nconst headers = () => ({\n  'access-token': localStorage.getItem('access-token'),\n  uid: localStorage.getItem('uid'),\n  client: localStorage.getItem('client'),\n  id: localStorage.getItem('id')\n});\n\nexport const getAllChats = (myID) => dispatch => {\n\tAxios.get(allChatsURL + myID + `/chats`, {\n  \t\theaders: headers()\n\t})\n    .then(chat => dispatch({\n\t\ttype: ALL_CHATS,\n\t\tchats: chat.data.data\n\t}))\n    .catch(err => {\n\t\ttoast.error(`Something went wrong`, {\n\t\t\tposition: toast.POSITION.TOP_CENTER,\n\t\t\thideProgressBar: true,\n\t\t\tpauseOnHover: true,\n\t\t});\n\n\t\tconsole.log(err);\n\n\t\tdispatch({\n\t\t\ttype: ERROR,\n\t\t\terror: err\n\t\t});\n    });\n};\n\nexport const loadChat = (myID, chatID, otherID) => {\n  return (dispatch) => {\n    return Axios({\n      method: 'get',\n      url: chatURL + myID + `/chats/` + chatID + `?other_user=` + otherID,\n      headers: headers()\n    })\n    .then(chat => {\n      dispatch({\n        type: LOAD_CHAT,\n        chat: chat.data.data\n      });\n    })\n    .catch(err => {\n      toast.error(`Something went wrong`, {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true,\n      });\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\n\nexport const createChatID = (myID, otherUser) => {\n  return (dispatch) => {\n    return Axios({\n      method: 'post',\n      url: initChatURL + `${myID}/chats?other_user=${otherUser}`,\n      headers: headers(),\n    })\n    .then((response) => {\n      dispatch({\n        type: CREATE_CHAT_ID,\n        chatID: response.data.data\n      });\n      return Axios({\n        method: 'get',\n        url: chatURL + myID + `/chats/` + response.data.data.id + `?other_user=` + otherUser,\n        headers: headers()\n      });\n    })\n    .then(chat => {\n      dispatch({\n        type: LOAD_CHAT,\n        chat: chat.data.data\n      });\n    })\n    .catch(err => {\n      toast.error(`Something went wrong`, {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true,\n      });\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport const sendNewMessage = (message, chatID) => {\n  return (dispatch) => {\n    return Axios({\n        method: 'post',\n        url: sendMessageURL,\n        headers: headers(),\n        data: {\n          message : {\n            content: message,\n            chat_id: chatID\n          }\n        }\n    })\n    .then(data => {\n      // dispatch({\n      //   type: LOAD_JOBS,\n      //   jobs: jobs.data.data\n      // });\n    })\n    .catch(err => {\n      toast.error(`Something went wrong`, {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true,\n      });\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\n\nexport const sendFirstMessage = (message, chatID) => {\n  return (dispatch) => {\n    return Axios({\n        method: 'post',\n        url: sendMessageURL,\n        headers: headers(),\n        data: {\n          message : {\n            content: message,\n            chat_id: chatID\n          }\n        }\n    })\n    .then(data => {\n      history.push(`/messages`);\n      // dispatch({\n      //   type: LOAD_JOBS,\n      //   jobs: jobs.data.data\n      // });\n    })\n    .catch(err => {\n      toast.error(`Something went wrong`, {\n        position: toast.POSITION.TOP_CENTER,\n        hideProgressBar: true,\n        pauseOnHover: true,\n      });\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};"]},"metadata":{},"sourceType":"module"}