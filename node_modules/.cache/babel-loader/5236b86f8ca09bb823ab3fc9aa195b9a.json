{"ast":null,"code":"import Axios from 'axios';\nimport { url } from '../lib/url';\nimport { GET_RECOMMENDED_USERS, ERROR } from './user.actions';\nexport var REMOVE_RECOMMENDED_USER = 'REMOVE_RECOMMENDED_USER';\nvar getRecommendedUsersURL = \"\".concat(url, \"recommenders/users?page[number]=0&page[size]=4\");\n\nvar headers = function headers() {\n  return {\n    'access-token': localStorage.getItem('access-token'),\n    uid: localStorage.getItem('uid'),\n    client: localStorage.getItem('client'),\n    id: localStorage.getItem('id')\n  };\n};\n\nexport var removeRecommendedUser = function removeRecommendedUser(id) {\n  return function (dispatch, getState) {\n    // List of existing users, excluding the one selected that we want removed\n    var modifiedRecommendedUsers = getState().recommendedUsersList.filter(function (user) {\n      return user.id !== id;\n    });\n    dispatch({\n      type: REMOVE_RECOMMENDED_USER,\n      id: id\n    });\n    Axios({\n      method: 'get',\n      url: getRecommendedUsersURL,\n      headers: headers()\n    }).then(function (res) {\n      // Get first user who's ID is not in the nonSelectedRecommendedUserIDs array\n      var newRecommendedUser = res.data.data.filter(function (user) {\n        return user.id !== id;\n      });\n      dispatch({\n        type: GET_RECOMMENDED_USERS,\n        recUsers: modifiedRecommendedUsers.concat(newRecommendedUser)\n      });\n    }).catch(function (err) {\n      console.error(\"Error: \", err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/actions/recommendedUsers.actions.js"],"names":["Axios","url","GET_RECOMMENDED_USERS","ERROR","REMOVE_RECOMMENDED_USER","getRecommendedUsersURL","headers","localStorage","getItem","uid","client","id","removeRecommendedUser","dispatch","getState","modifiedRecommendedUsers","recommendedUsersList","filter","user","type","method","then","res","newRecommendedUser","data","recUsers","concat","catch","err","console","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,YAApB;AACA,SAAQC,qBAAR,EAA+BC,KAA/B,QAA2C,gBAA3C;AAEA,OAAO,IAAMC,uBAAuB,GAAG,yBAAhC;AAEP,IAAMC,sBAAsB,aAAMJ,GAAN,mDAA5B;;AACA,IAAMK,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAO;AACrB,oBAAgBC,YAAY,CAACC,OAAb,CAAqB,cAArB,CADK;AAErBC,IAAAA,GAAG,EAAEF,YAAY,CAACC,OAAb,CAAqB,KAArB,CAFgB;AAGrBE,IAAAA,MAAM,EAAEH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAHa;AAIrBG,IAAAA,EAAE,EAAEJ,YAAY,CAACC,OAAb,CAAqB,IAArB;AAJiB,GAAP;AAAA,CAAhB;;AAOA,OAAO,IAAII,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAD,EAAE;AAAA,SAAI,UAACE,QAAD,EAAWC,QAAX,EAAwB;AAChE;AACA,QAAIC,wBAAwB,GAAGD,QAAQ,GAAGE,oBAAX,CAAgCC,MAAhC,CAAuC,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACP,EAAL,KAAYA,EAAhB;AAAA,KAA3C,CAA/B;AAEAE,IAAAA,QAAQ,CAAC;AACRM,MAAAA,IAAI,EAAEf,uBADE;AAERO,MAAAA,EAAE,EAAFA;AAFQ,KAAD,CAAR;AAKAX,IAAAA,KAAK,CAAC;AACLoB,MAAAA,MAAM,EAAE,KADH;AAELnB,MAAAA,GAAG,EAAEI,sBAFA;AAGLC,MAAAA,OAAO,EAAEA,OAAO;AAHX,KAAD,CAAL,CAKCe,IALD,CAKM,UAAAC,GAAG,EAAI;AACZ;AACA,UAAIC,kBAAkB,GAAGD,GAAG,CAACE,IAAJ,CAASA,IAAT,CAAcP,MAAd,CAAqB,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACP,EAAL,KAAYA,EAAhB;AAAA,OAAzB,CAAzB;AAEAE,MAAAA,QAAQ,CAAC;AACRM,QAAAA,IAAI,EAAEjB,qBADE;AAERuB,QAAAA,QAAQ,EAAEV,wBAAwB,CAACW,MAAzB,CAAgCH,kBAAhC;AAFF,OAAD,CAAR;AAIA,KAbD,EAcCI,KAdD,CAcO,UAAAC,GAAG,EAAI;AACbC,MAAAA,OAAO,CAACC,KAAR,CAAc,SAAd,EAAyBF,GAAzB;AAEAf,MAAAA,QAAQ,CAAC;AACRM,QAAAA,IAAI,EAAEhB,KADE;AAER2B,QAAAA,KAAK,EAAEF;AAFC,OAAD,CAAR;AAIA,KArBD;AAsBA,GA/BoC;AAAA,CAA9B","sourcesContent":["import Axios from 'axios';\nimport { url } from '../lib/url';\nimport {GET_RECOMMENDED_USERS, ERROR} from './user.actions';\n\nexport const REMOVE_RECOMMENDED_USER = 'REMOVE_RECOMMENDED_USER';\n\nconst getRecommendedUsersURL = `${url}recommenders/users?page[number]=0&page[size]=4`;\nconst headers = () => ({\n  'access-token': localStorage.getItem('access-token'),\n  uid: localStorage.getItem('uid'),\n  client: localStorage.getItem('client'),\n  id: localStorage.getItem('id')\n});\n\nexport var removeRecommendedUser = id => (dispatch, getState) => {\n\t// List of existing users, excluding the one selected that we want removed\n\tvar modifiedRecommendedUsers = getState().recommendedUsersList.filter(user => user.id !== id);\n\n\tdispatch({\n\t\ttype: REMOVE_RECOMMENDED_USER,\n\t\tid\n\t});\n\n\tAxios({\n\t\tmethod: 'get',\n\t\turl: getRecommendedUsersURL,\n\t\theaders: headers()\n\t})\n\t.then(res => {\n\t\t// Get first user who's ID is not in the nonSelectedRecommendedUserIDs array\n\t\tvar newRecommendedUser = res.data.data.filter(user => user.id !== id);\n\n\t\tdispatch({\n\t\t\ttype: GET_RECOMMENDED_USERS,\n\t\t\trecUsers: modifiedRecommendedUsers.concat(newRecommendedUser)\n\t\t});\n\t})\n\t.catch(err => {\n\t\tconsole.error(\"Error: \", err);\n\n\t\tdispatch({\n\t\t\ttype: ERROR,\n\t\t\terror: err\n\t\t});\n\t});\n}"]},"metadata":{},"sourceType":"module"}