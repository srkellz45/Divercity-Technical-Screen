{"ast":null,"code":"import _classCallCheck from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/Job/SimilarJobsFeed/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getSimilarJobs as _getSimilarJobs, loadSingleJob as _loadSingleJob, saveJob as _saveJob } from '../../../actions/job.actions';\nimport { getUser as _getUser } from '../../../actions/user.actions';\nimport Header from '../../../components/Header';\nimport Moment from 'moment';\nimport JobModal from '../JobApplyModal';\nimport ApplyJob from '../ApplyJob';\nimport SimilarJob from '../../../components/SimilarJob';\nimport JobApply from '../../../components/job.apply.components';\nimport { ToastContainer } from \"react-toastify\";\n\nvar SimilarJobsFeed =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SimilarJobsFeed, _Component);\n\n  function SimilarJobsFeed(props) {\n    var _this;\n\n    _classCallCheck(this, SimilarJobsFeed);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SimilarJobsFeed).call(this, props));\n    _this.state = {\n      isOpen: false,\n      jobId: '',\n      loading: false,\n      applyOpen: false\n    };\n    _this.openModal = _this.openModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleJobApply = _this.handleJobApply.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleJobSave = _this.handleJobSave.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeApplyModal = _this.closeApplyModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SimilarJobsFeed, [{\n    key: \"openModal\",\n    value: function openModal(evt) {\n      this.setState({\n        isOpen: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        isOpen: false\n      });\n    }\n  }, {\n    key: \"closeApplyModal\",\n    value: function closeApplyModal() {\n      this.setState({\n        applyOpen: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.scrollTo(0, 0);\n      this.props.getUser(localStorage.id);\n      this.props.getSimilarJobs(this.props.match.params.id);\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(evt) {\n      evt.preventDefault();\n      var target = evt.target;\n      this.props.loadSingleJob(target.id);\n      this.setState({\n        jobId: target.id,\n        isOpen: true,\n        singleJob: this.props.singleJob\n      });\n    }\n  }, {\n    key: \"handleJobApply\",\n    value: function handleJobApply(evt) {\n      this.setState({\n        applyOpen: true,\n        isOpen: false\n      });\n    }\n  }, {\n    key: \"handleJobSave\",\n    value: function handleJobSave(evt) {\n      this.setState({\n        isOpen: false,\n        applyOpen: false\n      });\n      console.log(this.state.jobId);\n      this.props.saveJob(this.state.jobId);\n    }\n  }, {\n    key: \"similarJobs\",\n    value: function similarJobs(evt) {\n      console.log(evt.target.id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        id: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(ToastContainer, {\n        autoClose: 3000,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), this.props.jobs.length <= 0 ? React.createElement(\"div\", {\n        id: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Getting similar jobs\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \".\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \".\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \".\"))) : null, React.createElement(\"div\", {\n        className: \"job-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, this.props.jobs.map(function (job) {\n        var jobs = job.attributes;\n        return React.createElement(\"div\", {\n          className: \"Job\",\n          key: job.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(SimilarJob, {\n          title: jobs.title,\n          date: Moment(jobs.created_at).fromNow(),\n          skills: jobs.skills_tag,\n          description: jobs.description,\n          employer: jobs.employer,\n          location: jobs.location_display_name,\n          id: job.id,\n          handler: _this2.handleChange,\n          applied: jobs.is_applied_by_current,\n          saved: jobs.is_bookmarked_by_current,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }));\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(JobModal // APPLY OR SAVE MODAL // SINGLE JOB VIEW\n      , {\n        show: this.state.isOpen,\n        onClose: this.closeModal,\n        className: \"Modal-Backdrop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, this.props.singleJob.id === this.state.jobId ? React.createElement(JobApply, {\n        data: this.props.singleJob,\n        apply: this.handleJobApply,\n        save: this.handleJobSave,\n        close: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        id: \"modal-loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"L\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"o\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"a\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"d\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"i\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"n\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"g\")))), React.createElement(JobModal // APPLY JOB MODAL\n      , {\n        show: this.state.applyOpen,\n        onClose: this.closeApplyModal,\n        data: this.props.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(ApplyJob, {\n        apply: this.handleJobApply,\n        onClose: this.closeApplyModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return SimilarJobsFeed;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    jobs: state.similarJobsList,\n    // makes it this.props.jobs\n    singleJob: state.singleJobList,\n    user: state.userList\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getSimilarJobs: function getSimilarJobs(id) {\n      dispatch(_getSimilarJobs(id));\n    },\n    loadSingleJob: function loadSingleJob(id) {\n      dispatch(_loadSingleJob(id));\n    },\n    getUser: function getUser(id) {\n      dispatch(_getUser(id));\n    },\n    saveJob: function saveJob(id) {\n      dispatch(_saveJob(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SimilarJobsFeed);","map":{"version":3,"sources":["/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/Job/SimilarJobsFeed/index.js"],"names":["React","Component","connect","getSimilarJobs","loadSingleJob","saveJob","getUser","Header","Moment","JobModal","ApplyJob","SimilarJob","JobApply","ToastContainer","SimilarJobsFeed","props","state","isOpen","jobId","loading","applyOpen","openModal","bind","closeModal","handleChange","handleJobApply","handleJobSave","closeApplyModal","evt","setState","window","scrollTo","localStorage","id","match","params","preventDefault","target","singleJob","console","log","jobs","length","map","job","attributes","title","created_at","fromNow","skills_tag","description","employer","location_display_name","is_applied_by_current","is_bookmarked_by_current","user","mapStateToProps","similarJobsList","singleJobList","userList","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport {\n    getSimilarJobs,\n    loadSingleJob,\n    saveJob\n  } from '../../../actions/job.actions';\nimport { getUser } from '../../../actions/user.actions';\nimport Header from '../../../components/Header';\nimport Moment from 'moment';\nimport JobModal from '../JobApplyModal';\nimport ApplyJob from '../ApplyJob';\n\nimport SimilarJob from '../../../components/SimilarJob';\nimport JobApply from '../../../components/job.apply.components';\nimport { ToastContainer } from \"react-toastify\";\n\nclass SimilarJobsFeed extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      isOpen: false,\n      jobId: '',\n      loading: false,\n      applyOpen: false,\n    };\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleJobApply = this.handleJobApply.bind(this);\n    this.handleJobSave = this.handleJobSave.bind(this);\n    this.closeApplyModal = this.closeApplyModal.bind(this);\n  }\n  openModal (evt) {\n    this.setState({\n      isOpen: true,\n    });\n  }\n\n  closeModal () {\n    this.setState({\n      isOpen: false\n    });\n  }\n  closeApplyModal () {\n    this.setState({\n      applyOpen: false\n    });\n  }\n  componentDidMount() {\n    window.scrollTo(0,0);\n    this.props.getUser(localStorage.id);\n    this.props.getSimilarJobs(this.props.match.params.id);\n  }\n\n  handleChange(evt) {\n    evt.preventDefault();\n    const target = evt.target;\n    this.props.loadSingleJob(target.id);\n    this.setState({\n      jobId : target.id,\n      isOpen: true,\n      singleJob: this.props.singleJob\n    });\n  }\n  handleJobApply(evt) {\n    this.setState({\n      applyOpen: true,\n      isOpen: false\n    });\n  }\n  handleJobSave(evt) {\n    this.setState({\n      isOpen: false,\n      applyOpen: false,\n    });\n    console.log(this.state.jobId);\n    this.props.saveJob(this.state.jobId);\n  }\n  similarJobs(evt) {\n    console.log(evt.target.id);\n\n  }\n\n  render() {\n    return(\n      <div id=\"main\">\n      <Header />\n      <ToastContainer autoClose={3000} />\n      { this.props.jobs.length <= 0 ? (\n          <div id=\"loading\">\n          <p className=\"loading\">Getting similar jobs<span>.</span><span>.</span><span>.</span></p>\n          </div>\n        ) : null }\n        <div className=\"job-grid\" >\n        { this.props.jobs.map((job) => {\n          let jobs = job.attributes;\n          return (\n            <div className=\"Job\" key={ job.id }>\n              <SimilarJob\n                title={ jobs.title }\n                date={ Moment(jobs.created_at).fromNow() }\n                skills={ jobs.skills_tag }\n                description={ jobs.description }\n                employer={ jobs.employer }\n                location={ jobs.location_display_name }\n                id={ job.id }\n                handler={this.handleChange}\n                applied={jobs.is_applied_by_current}\n                saved={jobs.is_bookmarked_by_current}\n              />\n            </div>\n          );\n        })}\n        <div>\n          <JobModal // APPLY OR SAVE MODAL // SINGLE JOB VIEW\n            show={this.state.isOpen}\n            onClose={this.closeModal}\n            className=\"Modal-Backdrop\"\n          >\n            { this.props.singleJob.id === this.state.jobId ? (\n              <JobApply\n                data={ this.props.singleJob }\n                apply={this.handleJobApply}\n                save={this.handleJobSave}\n                close={this.closeModal}\n              />\n            ) : (\n              <div id=\"modal-loading\">\n                <p className=\"loading\">\n                  <span>L</span><span>o</span><span>a</span><span>d</span><span>i</span><span>n</span><span>g</span>\n                </p>\n              </div>\n            )}\n          </JobModal>\n\n          <JobModal // APPLY JOB MODAL\n            show={this.state.applyOpen}\n            onClose={this.closeApplyModal}\n            data={this.props.user}\n          >\n            <ApplyJob\n              apply={this.handleJobApply}\n              onClose={this.closeApplyModal}\n            />\n          </JobModal>\n        </div>\n      </div>\n    </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    jobs : state.similarJobsList, // makes it this.props.jobs\n    singleJob : state.singleJobList,\n    user : state.userList,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getSimilarJobs: (id) => {\n      dispatch(getSimilarJobs(id));\n    },\n    loadSingleJob: (id) => {\n      dispatch(loadSingleJob(id));\n    },\n    getUser: (id) => {\n      dispatch(getUser(id));\n    },\n    saveJob: (id) => {\n      dispatch(saveJob(id));\n    }\n  }\n}\n\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SimilarJobsFeed);"]},"metadata":{},"sourceType":"module"}