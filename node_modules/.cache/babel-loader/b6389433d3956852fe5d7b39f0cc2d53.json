{"ast":null,"code":"import _classCallCheck from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/Groups/SingleQuestion/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { ToastContainer } from \"react-toastify\";\nimport { NavLink } from 'react-router-dom';\nimport Moment from 'moment';\nimport { addSingleQuestionReply as _addSingleQuestionReply, getAnswers as _getAnswers, getSingleQuestion as _getSingleQuestion, deleteQuestion as _deleteQuestion, editQuestion as _editQuestion } from '../../../actions/question.actions';\nimport Header from '../../../components/Header.js';\nimport Modal from '../../Modal';\nimport EditQuestionModal from '../../EditQuestionModal';\nimport IndividualQuestion from '../../../components/singleQuestion.components.js';\nimport SingleQuestionTopic from '../../../components/singleQuestion.topic.components.js';\nimport Photo from '../../../assets/icons/image.png';\nimport Checkmark from '../../../assets/Checkmark.png';\nimport Decline from '../../../assets/Decline.png';\nimport Linkify from 'linkifyjs/react'; // {{url}}/question/:id/\n\nvar SingleQuestion =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SingleQuestion, _Component);\n\n  function SingleQuestion(props) {\n    var _this;\n\n    _classCallCheck(this, SingleQuestion);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SingleQuestion).call(this, props));\n    _this.state = {\n      question_ID: _this.props.match.params.id,\n      isOpen: false,\n      reply: {\n        id: '',\n        data: ''\n      },\n      openDropdown: false,\n      deleteQuestion: false,\n      questionToBeDeleted: '',\n      editTopic: false,\n      topic: '',\n      deleteCheck: false\n    };\n    _this.openModal = _this.openModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeDropdown = _this.closeDropdown.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleReplyInput = _this.handleReplyInput.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addReply = _this.addReply.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.openDeleteQuestion = _this.openDeleteQuestion.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteCheck = _this.deleteCheck.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleDeleteQuestion = _this.handleDeleteQuestion.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.editQuestion = _this.editQuestion.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.editTopic = _this.editTopic.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleQuestionEdit = _this.handleQuestionEdit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SingleQuestion, [{\n    key: \"openModal\",\n    value: function openModal(evt) {\n      this.props.getDocuments();\n      this.setState({\n        isOpen: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal(evt) {\n      this.setState({\n        isOpen: false,\n        editTopic: false,\n        deleteCheck: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.scrollTo(0, 0);\n      this.props.getAnswers(this.state.question_ID);\n      this.props.getSingleQuestion(this.state.question_ID);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('click', this.closeDropdown);\n    }\n  }, {\n    key: \"openEdit\",\n    value: function openEdit(evt) {\n      evt.preventDefault();\n      this.setState({\n        openEdit: true\n      });\n    }\n  }, {\n    key: \"handleReplyInput\",\n    value: function handleReplyInput(evt) {\n      evt.preventDefault();\n      this.setState({\n        reply: {\n          data: evt.target.value,\n          name: evt.target.name,\n          id: evt.target.id\n        }\n      });\n    }\n  }, {\n    key: \"addReply\",\n    value: function addReply(evt) {\n      evt.preventDefault();\n      this.props.addSingleQuestionReply(this.state.reply.data, this.state.reply.id);\n      this.setState({\n        firstReply: '',\n        otherReply: '',\n        reply: {\n          id: '',\n          data: ''\n        }\n      });\n    }\n  }, {\n    key: \"openDeleteQuestion\",\n    value: function openDeleteQuestion(evt) {\n      var _this2 = this;\n\n      evt.preventDefault();\n      this.setState({\n        deleteQuestion: true,\n        questionToBeDeleted: evt.target.id\n      }, function () {\n        document.addEventListener('click', _this2.closeDropdown);\n      });\n    }\n  }, {\n    key: \"closeDropdown\",\n    value: function closeDropdown() {\n      var _this3 = this;\n\n      this.setState({\n        deleteQuestion: false,\n        topic: ''\n      }, function () {\n        document.removeEventListener('click', _this3.closeDropdown);\n      });\n    }\n  }, {\n    key: \"deleteCheck\",\n    value: function deleteCheck(evt) {\n      evt.preventDefault();\n      this.setState({\n        deleteCheck: true\n      });\n    }\n  }, {\n    key: \"handleDeleteQuestion\",\n    value: function handleDeleteQuestion(evt) {\n      evt.preventDefault();\n      var groupID = parseInt(this.props.question.attributes.group[0].id);\n      var questionID = parseInt(this.state.question_ID);\n      this.props.deleteQuestion(questionID, groupID, 'singleQuestion');\n      this.setState({\n        deleteCheck: false\n      });\n    }\n  }, {\n    key: \"editQuestion\",\n    value: function editQuestion(evt) {\n      evt.preventDefault();\n      this.setState({\n        editTopic: true\n      });\n    }\n  }, {\n    key: \"editTopic\",\n    value: function editTopic(evt) {\n      this.setState({\n        topic: evt.target.value\n      });\n    }\n  }, {\n    key: \"handleQuestionEdit\",\n    value: function handleQuestionEdit(evt) {\n      evt.preventDefault();\n      var questionData = {\n        \"question\": {\n          \"question_type\": \"topic\"\n        }\n      };\n      var groupArrayID = [];\n      var groupID = parseInt(this.props.question.attributes.group[0].id);\n      var questionID = parseInt(this.state.questionToBeDeleted);\n      groupArrayID.push(JSON.parse(groupID));\n\n      if (this.state.topic) {\n        Object.assign(questionData.question, {\n          text: this.state.topic\n        });\n      }\n\n      if (this.state.description) {\n        Object.assign(questionData.question, {\n          description: this.state.description\n        });\n      }\n\n      Object.assign(questionData.question, {\n        group_of_interest_ids: groupArrayID\n      });\n      this.props.editQuestion(questionData, questionID, groupID, \"singleQuestion\");\n      this.setState({\n        editTopic: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"feed\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), React.createElement(ToastContainer, {\n        autoClose: 3000,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"user-view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, this.props.question.length <= 0 ? React.createElement(\"div\", {\n        id: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"loading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Fetching that question\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \".\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \".\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \".\"))) : // once it's done loading....\n      React.createElement(\"div\", {\n        className: \"Single-Question-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"single-question-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"topicdate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/groups/\".concat(this.props.question.attributes.group[0].id, \"/\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, this.props.question.attributes.group[0].title, \" \\xA0\", React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"\\u22C5\"), \"\\xA0 \", Moment(this.props.question.attributes.created_at).fromNow())), React.createElement(\"div\", {\n        id: \"question-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"question-photo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.props.question.attributes.author_info.avatar_medium,\n        alt: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"question-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(Linkify, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, this.props.question.attributes.text)), this.props.question.attributes.author_id === parseInt(localStorage.id) && React.createElement(\"button\", {\n        className: \"Question-Delete-btn\",\n        type: \"button\",\n        id: this.props.question.id,\n        onClick: this.openDeleteQuestion,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"\\xB7\\xB7\\xB7\"), this.state.deleteQuestion && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, this.state.questionToBeDeleted === this.props.question.id && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, this.props.question.attributes.picture_main !== \"https://apinew.pincapp.com/images/default_avatar.png\" ? React.createElement(\"div\", {\n        className: \"SingleQuestion-image-dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"Question-dropdown-item\",\n        onClick: this.editQuestion,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Edit Topic\"), React.createElement(\"div\", {\n        id: \"Question-dropdown-item\",\n        onClick: this.deleteCheck,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Delete Topic\")) : React.createElement(\"div\", {\n        className: \"SingleQuestion-dropdown\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"Question-dropdown-item\",\n        onClick: this.editQuestion,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Edit Topic\"), React.createElement(\"div\", {\n        id: \"Question-dropdown-item\",\n        onClick: this.deleteCheck,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Delete Topic\")))), this.props.question.attributes.picture_main && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, this.props.question.attributes.picture_main !== \"https://apinew.pincapp.com/images/default_avatar.png\" ? React.createElement(\"div\", {\n        id: \"single-question-image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"question-content-image\",\n        src: this.props.question.attributes.picture_main,\n        alt: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      })) : null), React.createElement(\"div\", {\n        id: \"question-author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"posted by\\xA0\", React.createElement(\"a\", {\n        href: \"/users/\".concat(this.props.question.attributes.author_id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, this.props.question.attributes.author_info.name)))), this.props.answers.map(function (answer) {\n        return React.createElement(\"div\", {\n          className: \"Answers\",\n          key: answer.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, React.createElement(IndividualQuestion, {\n          answers: answer.attributes,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }));\n      }), React.createElement(\"div\", {\n        id: \"single-question-add-comment-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        className: \"single-add-question-reply\",\n        onSubmit: this.addReply,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"reply-input\",\n        value: this.state.reply.data,\n        placeholder: \"Add Reply...\",\n        type: \"text\",\n        id: this.props.match.params.id,\n        onChange: this.handleReplyInput,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"single-question-reply-photo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: localStorage.image,\n        alt: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }))))), React.createElement(EditQuestionModal // EDIT TOPIC MODAL\n      , {\n        show: this.state.editTopic,\n        onClose: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, this.props.question <= 0 ? null : React.createElement(\"div\", {\n        className: \"single-Question-Edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        type: \"title\",\n        id: \"title\",\n        placeholder: this.props.question.attributes.text,\n        defaultValue: this.props.question.attributes.text,\n        onChange: this.editTopic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"single-Question-Edit-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"single-Group-edit-btn\",\n        type: \"button\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(\"button\", {\n        className: \"single-Group-edit-btn\",\n        type: \"button\",\n        onClick: this.handleQuestionEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, \"Save Changes\"))))), React.createElement(EditQuestionModal // DELETE TOPIC CHECK MODAL\n      , {\n        show: this.state.deleteCheck,\n        onClose: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, this.props.question <= 0 ? null : React.createElement(\"div\", {\n        className: \"Topic-Delete-Check\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"single-Question-delete-headline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"Delete Topic\"), React.createElement(\"div\", {\n        id: \"single-Question-delete-subline\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, \"Are you sure you want to delete this topic? This cannot be undone.\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }), \"All responses to the topic will be deleted as well.\"), React.createElement(\"div\", {\n        className: \"single-Question-delete-check-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"single-Question-delete-check-post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, this.props.question.attributes.text)), React.createElement(\"div\", {\n        className: \"single-Question-Edit-buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"single-Group-edit-btn\",\n        type: \"button\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(\"button\", {\n        className: \"single-Group-delete-btn\",\n        type: \"button\",\n        onClick: this.handleDeleteQuestion,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, \"Delete\"))))));\n    }\n  }]);\n\n  return SingleQuestion;\n}(Component); // sets store state on local props\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    answers: state.answersList,\n    modal: state.modal,\n    question: state.singleQuestionList\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getAnswers: function getAnswers(id) {\n      dispatch(_getAnswers(id));\n    },\n    addSingleQuestionReply: function addSingleQuestionReply(reply, id) {\n      dispatch(_addSingleQuestionReply(reply, id));\n    },\n    getSingleQuestion: function getSingleQuestion(id) {\n      dispatch(_getSingleQuestion(id));\n    },\n    deleteQuestion: function deleteQuestion(id, groupID, where) {\n      dispatch(_deleteQuestion(id, groupID, where));\n    },\n    editQuestion: function editQuestion(data, questionID, groupID, where) {\n      dispatch(_editQuestion(data, questionID, groupID, where));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SingleQuestion);","map":{"version":3,"sources":["/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/Groups/SingleQuestion/index.js"],"names":["React","Component","connect","ToastContainer","NavLink","Moment","addSingleQuestionReply","getAnswers","getSingleQuestion","deleteQuestion","editQuestion","Header","Modal","EditQuestionModal","IndividualQuestion","SingleQuestionTopic","Photo","Checkmark","Decline","Linkify","SingleQuestion","props","state","question_ID","match","params","id","isOpen","reply","data","openDropdown","questionToBeDeleted","editTopic","topic","deleteCheck","openModal","bind","closeModal","closeDropdown","handleReplyInput","addReply","openDeleteQuestion","handleDeleteQuestion","handleQuestionEdit","evt","getDocuments","setState","window","scrollTo","document","removeEventListener","preventDefault","openEdit","target","value","name","firstReply","otherReply","addEventListener","groupID","parseInt","question","attributes","group","questionID","questionData","groupArrayID","push","JSON","parse","Object","assign","text","description","group_of_interest_ids","length","title","created_at","fromNow","author_info","avatar_medium","author_id","localStorage","picture_main","answers","map","answer","image","mapStateToProps","answersList","modal","singleQuestionList","mapDispatchToProps","dispatch","where"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { ToastContainer } from \"react-toastify\";\nimport { NavLink } from 'react-router-dom';\nimport Moment from 'moment';\nimport { addSingleQuestionReply, getAnswers, getSingleQuestion, deleteQuestion, editQuestion } from '../../../actions/question.actions';\nimport Header from '../../../components/Header.js';\nimport Modal from '../../Modal';\nimport EditQuestionModal from '../../EditQuestionModal';\nimport IndividualQuestion from '../../../components/singleQuestion.components.js';\nimport SingleQuestionTopic from '../../../components/singleQuestion.topic.components.js';\nimport Photo from '../../../assets/icons/image.png';\n\nimport Checkmark from '../../../assets/Checkmark.png';\nimport Decline from '../../../assets/Decline.png';\nimport Linkify from 'linkifyjs/react';\n  // {{url}}/question/:id/\n\nclass SingleQuestion extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      question_ID: this.props.match.params.id,\n      isOpen: false,\n      reply: {\n        id: '',\n        data: '',\n      },\n      openDropdown: false,\n      deleteQuestion: false,\n      questionToBeDeleted: '',\n      editTopic: false,\n      topic: '',\n      deleteCheck: false,\n    };\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.closeDropdown = this.closeDropdown.bind(this);\n    this.handleReplyInput = this.handleReplyInput.bind(this);\n    this.addReply = this.addReply.bind(this);\n    this.openDeleteQuestion = this.openDeleteQuestion.bind(this);\n    this.deleteCheck = this.deleteCheck.bind(this);\n    this.handleDeleteQuestion = this.handleDeleteQuestion.bind(this);\n    this.editQuestion = this.editQuestion.bind(this);\n    this.editTopic = this.editTopic.bind(this);\n    this.handleQuestionEdit = this.handleQuestionEdit.bind(this);\n  }\n\n  openModal (evt) {\n    this.props.getDocuments();\n    this.setState({\n      isOpen: true,\n    });\n  }\n\n  closeModal (evt) {\n    this.setState({\n      isOpen: false,\n      editTopic: false,\n      deleteCheck: false,\n    });\n  }\n  componentDidMount() {\n    window.scrollTo(0,0);\n    this.props.getAnswers(this.state.question_ID);\n    this.props.getSingleQuestion(this.state.question_ID);\n  }\n  componentWillUnmount() {\n    document.removeEventListener('click', this.closeDropdown);\n  }\n  openEdit (evt) {\n    evt.preventDefault();\n    this.setState({\n      openEdit: true,\n    });\n  }\n  handleReplyInput(evt) {\n    evt.preventDefault();\n    this.setState({\n      reply: {\n        data: evt.target.value,\n        name: evt.target.name,\n        id: evt.target.id\n      },\n    });\n  }\n\n  addReply(evt) {\n    evt.preventDefault();\n    this.props.addSingleQuestionReply(this.state.reply.data, this.state.reply.id);\n    this.setState({\n      firstReply: '',\n      otherReply: '',\n      reply: {\n        id: '',\n        data: '',\n      },\n    });\n  }\n  openDeleteQuestion(evt) {\n    evt.preventDefault();\n    this.setState({\n      deleteQuestion: true,\n      questionToBeDeleted: evt.target.id\n    }, () => {\n      document.addEventListener('click', this.closeDropdown);\n    });\n  }\n  closeDropdown() {\n    this.setState({\n      deleteQuestion: false,\n      topic: '',\n    }, () => {\n      document.removeEventListener('click', this.closeDropdown);\n    });\n  }\n  deleteCheck(evt) {\n    evt.preventDefault();\n    this.setState({\n      deleteCheck: true,\n    });\n  }\n  handleDeleteQuestion(evt) {\n    evt.preventDefault();\n    let groupID = parseInt(this.props.question.attributes.group[0].id);\n    let questionID = parseInt(this.state.question_ID);\n    this.props.deleteQuestion(questionID, groupID, 'singleQuestion');\n    this.setState({\n      deleteCheck: false,\n    });\n  }\n  editQuestion(evt) {\n    evt.preventDefault();\n    this.setState({\n      editTopic: true,\n    });\n  }\n  editTopic(evt) {\n    this.setState({\n      topic: evt.target.value\n    });\n  }\n  handleQuestionEdit(evt) {\n    evt.preventDefault();\n    let questionData = { \"question\": { \"question_type\": \"topic\" } };\n    let groupArrayID = [];\n    let groupID = parseInt(this.props.question.attributes.group[0].id);\n    let questionID = parseInt(this.state.questionToBeDeleted);\n    groupArrayID.push(JSON.parse(groupID));\n\n    if(this.state.topic) {\n      Object.assign(questionData.question, {text: this.state.topic});\n    }\n    if(this.state.description) {\n      Object.assign(questionData.question, {description: this.state.description});\n    }\n    Object.assign(questionData.question, {group_of_interest_ids: groupArrayID});\n    this.props.editQuestion(questionData, questionID, groupID, \"singleQuestion\");\n    this.setState({\n      editTopic: false,\n    });\n  }\n\n  render() {\n    return(\n      <div className=\"feed\">\n        <Header />\n        <ToastContainer autoClose={3000} />\n        <div className=\"user-view\">\n          { this.props.question.length <= 0 ? (\n            <div id=\"loading\">\n              <p className=\"loading\">Fetching that question<span>.</span><span>.</span><span>.</span></p>\n            </div>\n          ) : ( // once it's done loading....\n\n          <div className=\"Single-Question-body\">\n            <div className=\"single-question-grid\">\n              <div className=\"topicdate\">\n                <NavLink to={`/groups/${this.props.question.attributes.group[0].id}/`}>\n                  { this.props.question.attributes.group[0].title } &nbsp;<b>&sdot;</b>&nbsp; { Moment(this.props.question.attributes.created_at).fromNow() }\n                </NavLink>\n              </div>\n              <div id=\"question-item\">\n                <div id=\"question-photo\">\n                  <img src={ this.props.question.attributes.author_info.avatar_medium } alt=\"profile\" />\n                </div>\n                <div id=\"question-body\">\n                  <Linkify>\n                    { this.props.question.attributes.text }\n                  </Linkify>\n                </div>\n                { this.props.question.attributes.author_id === parseInt(localStorage.id) && (\n                  <button\n                    className=\"Question-Delete-btn\"\n                    type=\"button\"\n                    id={this.props.question.id}\n                    onClick={this.openDeleteQuestion}\n                    >\n                    &middot;&middot;&middot;\n                  </button>\n                )}\n                { this.state.deleteQuestion && (\n                  <React.Fragment>\n                  { this.state.questionToBeDeleted === this.props.question.id && (\n                    <React.Fragment>\n                    { this.props.question.attributes.picture_main !== \"https://apinew.pincapp.com/images/default_avatar.png\" ? (\n                      <div className=\"SingleQuestion-image-dropdown\">\n                        <div id=\"Question-dropdown-item\" onClick={this.editQuestion}>Edit Topic</div>\n                        <div id=\"Question-dropdown-item\" onClick={this.deleteCheck}>Delete Topic</div>\n                      </div>\n                    ) : (\n                      <div className=\"SingleQuestion-dropdown\">\n                        <div id=\"Question-dropdown-item\" onClick={this.editQuestion}>Edit Topic</div>\n                        <div id=\"Question-dropdown-item\" onClick={this.deleteCheck}>Delete Topic</div>\n                      </div>\n                    )}\n                    </React.Fragment>\n                  )}\n                  </React.Fragment>\n                )}\n\n                { this.props.question.attributes.picture_main && (\n                  <React.Fragment>\n                    { this.props.question.attributes.picture_main !== \"https://apinew.pincapp.com/images/default_avatar.png\" ? (\n                      <div id=\"single-question-image\">\n                        <img className=\"question-content-image\" src={ this.props.question.attributes.picture_main } alt=\"profile\"/>\n                      </div>\n                    ) : null }\n                  </React.Fragment>\n                )}\n                <div id=\"question-author\">\n                  posted by&nbsp;\n                    <a href={`/users/${this.props.question.attributes.author_id}`}>{ this.props.question.attributes.author_info.name }</a>\n                </div>\n              </div>\n            </div>\n            { this.props.answers.map((answer) => {\n              return (\n                <div className=\"Answers\" key={ answer.id }>\n                  <IndividualQuestion\n                    answers={ answer.attributes }\n                  />\n                </div>\n              );\n            })}\n\n            <div id=\"single-question-add-comment-body\">\n              <hr />\n               <form className=\"single-add-question-reply\" onSubmit={this.addReply}>\n                 <input\n                   className=\"reply-input\"\n                   value={ this.state.reply.data }\n                   placeholder=\"Add Reply...\"\n                   type=\"text\"\n                   id={ this.props.match.params.id }\n                   onChange={ this.handleReplyInput } />\n               </form>\n\n               <div id=\"single-question-reply-photo\">\n                   <img src={ localStorage.image } alt=\"profile\" />\n               </div>\n           </div>\n          </div>\n          )}\n        </div>\n        <EditQuestionModal // EDIT TOPIC MODAL\n         show={this.state.editTopic}\n         onClose={this.closeModal}\n        >\n          <React.Fragment>\n            { this.props.question <= 0 ? (\n              null\n            ) : (\n            <div className=\"single-Question-Edit\">\n              <textarea\n                type=\"title\"\n                id=\"title\"\n                placeholder={this.props.question.attributes.text}\n                defaultValue={this.props.question.attributes.text}\n                onChange={this.editTopic}\n              />\n              <div className=\"single-Question-Edit-buttons\">\n              <button\n                 className=\"single-Group-edit-btn\"\n                 type=\"button\"\n                 onClick={this.closeModal}>\n                 Cancel\n              </button>\n              <button\n                 className=\"single-Group-edit-btn\"\n                 type=\"button\"\n                 onClick={this.handleQuestionEdit}>\n                 Save Changes\n              </button>\n              </div>\n            </div>\n            )}\n          </React.Fragment>\n        </EditQuestionModal>\n\n        <EditQuestionModal // DELETE TOPIC CHECK MODAL\n           show={this.state.deleteCheck}\n           onClose={this.closeModal}\n          >\n            <React.Fragment>\n              { this.props.question <= 0 ? (\n                null\n              ) : (\n              <div className=\"Topic-Delete-Check\">\n                <div id=\"single-Question-delete-headline\">\n                  Delete Topic\n                </div>\n                <div id=\"single-Question-delete-subline\">\n                  Are you sure you want to delete this topic? This cannot be undone.<br />\n                  All responses to the topic will be deleted as well.\n                </div>\n                <div className=\"single-Question-delete-check-item\">\n                  <div id=\"single-Question-delete-check-post\">\n                    {this.props.question.attributes.text}\n                  </div>\n                </div>\n                <div className=\"single-Question-Edit-buttons\">\n                <button\n                   className=\"single-Group-edit-btn\"\n                   type=\"button\"\n                   onClick={this.closeModal}>\n                   Cancel\n                </button>\n                <button\n                   className=\"single-Group-delete-btn\"\n                   type=\"button\"\n                   onClick={this.handleDeleteQuestion}>\n                   Delete\n                </button>\n                </div>\n              </div>\n              )}\n            </React.Fragment>\n        </EditQuestionModal>\n      </div>\n    );\n  }\n}\n\n// sets store state on local props\nconst mapStateToProps = state => {\n  return {\n    answers: state.answersList,\n    modal: state.modal,\n    question: state.singleQuestionList\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    getAnswers: (id) => {\n      dispatch(getAnswers(id));\n    },\n    addSingleQuestionReply: (reply, id) => {\n      dispatch(addSingleQuestionReply(reply, id));\n    },\n    getSingleQuestion: (id) => {\n      dispatch(getSingleQuestion(id));\n    },\n    deleteQuestion: (id, groupID, where) => {\n      dispatch(deleteQuestion(id, groupID, where));\n    },\n    editQuestion: (data, questionID, groupID, where) => {\n      dispatch(editQuestion(data, questionID, groupID, where));\n    }\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(SingleQuestion);\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}