{"ast":null,"code":"import Axios from 'axios';\nimport { url } from '../lib/url';\nimport history from '../history';\nimport { toast } from \"react-toastify\";\nvar addNewQuestionToGroupURL = \"\".concat(url, \"questions\");\nvar addQuestionReplyURL = \"\".concat(url, \"answers\");\nvar getQuestionsURL = \"\".concat(url, \"questions?filter_by_user_groups=true\");\nvar getQuestionsByGroupURL = \"\".concat(url, \"questions?group_id=\");\nvar getAnswersURL = \"\".concat(url, \"questions/\");\nvar deleteQuestionURL = \"\".concat(url, \"questions\");\nexport var ADD_NEW_QUESTION = 'ADD_NEW_QUESTION';\nexport var LOAD_QUESTIONS_BY_GROUP = 'LOAD_QUESTIONS_BY_GROUP';\nexport var GET_GROUP_QUESTIONS_AFTER_REPLY = 'GET_GROUP_QUESTIONS_AFTER_REPLY';\nexport var ADD_QUESTION_REPLY = 'ADD_QUESTION_REPLY';\nexport var GET_QUESTIONS_AFTER_REPLY = 'GET_QUESTIONS_AFTER_REPLY';\nexport var GET_ANSWERS = 'GET_ANSWERS';\nexport var GET_SINGLE_QUESTION_AFTER_REPLY = 'GET_SINGLE_QUESTION_AFTER_REPLY';\nexport var GET_SINGLE_QUESTION = 'GET_SINGLE_QUESTION';\nexport var GET_SINGLE_GROUP_AFTER_REPLY = 'GET_SINGLE_GROUP_AFTER_REPLY';\nexport var EMPTY_LIST = 'EMPTY_LIST';\nexport var GET_QUESTIONS = 'GET_QUESTIONS';\nexport var ERROR = 'ERROR';\n\nvar headers = function headers() {\n  return {\n    'access-token': localStorage.getItem('access-token'),\n    uid: localStorage.getItem('uid'),\n    client: localStorage.getItem('client'),\n    id: localStorage.getItem('id')\n  };\n};\n\nexport var addQuestionReply = function addQuestionReply(reply, id, picture) {\n  return function (dispatch) {\n    return Axios({\n      method: 'post',\n      url: addQuestionReplyURL,\n      headers: headers(),\n      data: {\n        \"answer\": {\n          \"question_id\": parseInt(id),\n          \"text\": reply,\n          \"picture\": ''\n        }\n      }\n    }).then(function (response) {\n      if (response.status === 201) {\n        return Axios({\n          method: 'get',\n          url: getQuestionsURL,\n          headers: headers()\n        }).then(function (response) {\n          dispatch({\n            type: GET_QUESTIONS_AFTER_REPLY,\n            questions: response.data.data\n          });\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var addSingleGroupReply = function addSingleGroupReply(reply, id, groupID) {\n  return function (dispatch) {\n    return Axios({\n      method: 'post',\n      url: addQuestionReplyURL,\n      headers: headers(),\n      data: {\n        \"answer\": {\n          \"question_id\": parseInt(id),\n          \"text\": reply,\n          \"picture\": ''\n        }\n      }\n    }).then(function (response) {\n      console.log(groupID);\n\n      if (response.status === 201) {\n        return Axios({\n          method: 'get',\n          url: getQuestionsByGroupURL + groupID,\n          headers: headers()\n        }).then(function (response) {\n          console.log(response.data.data);\n          dispatch({\n            type: GET_SINGLE_GROUP_AFTER_REPLY,\n            questions: response.data.data\n          });\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var addSingleQuestionReply = function addSingleQuestionReply(reply, id, picture) {\n  return function (dispatch) {\n    return Axios({\n      method: 'post',\n      url: addQuestionReplyURL,\n      headers: headers(),\n      data: {\n        \"answer\": {\n          \"question_id\": parseInt(id),\n          \"text\": reply,\n          \"picture\": picture\n        }\n      }\n    }).then(function (response) {\n      console.log(response.data.data);\n\n      if (response.status === 201) {\n        dispatch({\n          type: GET_SINGLE_QUESTION_AFTER_REPLY,\n          answers: response.data.data\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var addNewQuestion = function addNewQuestion(reply, id, picture) {\n  var arrID = [];\n  arrID.push(JSON.parse(id));\n  return function (dispatch) {\n    return Axios({\n      method: 'post',\n      url: addNewQuestionToGroupURL,\n      headers: headers(),\n      data: {\n        \"question\": {\n          \"text\": reply,\n          \"group_of_interest_ids\": arrID,\n          \"question_type\": \"topic\",\n          \"picture\": picture\n        }\n      }\n    }).then(function (response) {\n      if (response.status === 201) {\n        return Axios({\n          method: 'get',\n          url: getQuestionsByGroupURL + id,\n          headers: headers()\n        }).then(function (response) {\n          console.log(response);\n          dispatch({\n            type: LOAD_QUESTIONS_BY_GROUP,\n            questions: response.data.data\n          });\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var getAnswers = function getAnswers(id) {\n  return function (dispatch) {\n    return Axios({\n      method: 'get',\n      url: getAnswersURL + id + \"/answers\",\n      headers: headers()\n    }).then(function (response) {\n      if (response.data.data.length === 0) {\n        dispatch({\n          type: EMPTY_LIST,\n          answers: response.data.data\n        });\n      }\n\n      dispatch({\n        type: GET_ANSWERS,\n        answers: response.data.data\n      });\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var getSingleQuestion = function getSingleQuestion(id) {\n  return function (dispatch) {\n    return Axios({\n      method: 'get',\n      url: getAnswersURL + id,\n      headers: headers()\n    }).then(function (response) {\n      console.log(response);\n      dispatch({\n        type: GET_SINGLE_QUESTION,\n        question: response.data.data\n      });\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var editQuestion = function editQuestion(reply, questionID, groupID, where) {\n  console.log(where);\n  return function (dispatch) {\n    return Axios({\n      method: 'put',\n      url: deleteQuestionURL + \"/\" + questionID,\n      headers: headers(),\n      data: reply\n    }).then(function (response) {\n      if (response.status === 204 && where === \"feed\") {\n        return Axios({\n          method: 'get',\n          url: getQuestionsURL,\n          headers: headers()\n        }).then(function (response) {\n          dispatch({\n            type: GET_QUESTIONS,\n            questions: response.data.data\n          });\n        });\n      }\n\n      if (response.status === 204 && where === \"singleGroup\") {\n        return Axios({\n          method: 'get',\n          url: getQuestionsByGroupURL + groupID,\n          headers: headers()\n        }).then(function (response) {\n          dispatch({\n            type: LOAD_QUESTIONS_BY_GROUP,\n            questions: response.data.data\n          });\n        });\n      }\n\n      if (response.status === 204 && where === \"singleQuestion\") {\n        return Axios({\n          method: 'get',\n          url: getAnswersURL + questionID,\n          headers: headers()\n        }).then(function (response) {\n          console.log(response);\n          dispatch({\n            type: GET_SINGLE_QUESTION,\n            question: response.data.data\n          });\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport var deleteQuestion = function deleteQuestion(questionID, groupID, where) {\n  return function (dispatch) {\n    return Axios({\n      method: 'delete',\n      url: deleteQuestionURL + \"/\" + questionID,\n      headers: headers()\n    }).then(function (response) {\n      if (response.status === 204) {\n        if (where === \"singleGroup\") {\n          history.push(\"/groups/\".concat(groupID));\n          return Axios({\n            method: 'get',\n            url: getQuestionsByGroupURL + groupID,\n            headers: headers()\n          }).then(function (response) {\n            toast.success(\"Topic Deleted\", {\n              position: toast.POSITION.TOP_CENTER,\n              hideProgressBar: true\n            });\n            dispatch({\n              type: LOAD_QUESTIONS_BY_GROUP,\n              questions: response.data.data\n            });\n          });\n        }\n\n        if (where === \"feed\") {\n          history.push(\"/feed\");\n          return Axios({\n            method: 'get',\n            url: getQuestionsURL,\n            headers: headers()\n          }).then(function (response) {\n            toast.success(\"Topic Deleted\", {\n              position: toast.POSITION.TOP_CENTER,\n              hideProgressBar: true\n            });\n            dispatch({\n              type: GET_QUESTIONS,\n              questions: response.data.data\n            });\n          });\n        }\n\n        if (where === \"singleQuestion\") {\n          history.push(\"/feed\");\n          return Axios({\n            method: 'get',\n            url: getQuestionsURL,\n            headers: headers()\n          }).then(function (response) {\n            toast.success(\"Topic Deleted\", {\n              position: toast.POSITION.TOP_CENTER,\n              hideProgressBar: true\n            });\n            dispatch({\n              type: GET_QUESTIONS,\n              questions: response.data.data\n            });\n          });\n        }\n      }\n    }).catch(function (err) {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/actions/question.actions.js"],"names":["Axios","url","history","toast","addNewQuestionToGroupURL","addQuestionReplyURL","getQuestionsURL","getQuestionsByGroupURL","getAnswersURL","deleteQuestionURL","ADD_NEW_QUESTION","LOAD_QUESTIONS_BY_GROUP","GET_GROUP_QUESTIONS_AFTER_REPLY","ADD_QUESTION_REPLY","GET_QUESTIONS_AFTER_REPLY","GET_ANSWERS","GET_SINGLE_QUESTION_AFTER_REPLY","GET_SINGLE_QUESTION","GET_SINGLE_GROUP_AFTER_REPLY","EMPTY_LIST","GET_QUESTIONS","ERROR","headers","localStorage","getItem","uid","client","id","addQuestionReply","reply","picture","dispatch","method","data","parseInt","then","response","status","type","questions","catch","err","console","log","error","addSingleGroupReply","groupID","addSingleQuestionReply","answers","addNewQuestion","arrID","push","JSON","parse","getAnswers","length","getSingleQuestion","question","editQuestion","questionID","where","deleteQuestion","success","position","POSITION","TOP_CENTER","hideProgressBar"],"mappings":"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","sourcesContent":["import Axios from 'axios';\nimport { url } from '../lib/url';\nimport history from '../history';\nimport { toast } from \"react-toastify\";\nconst addNewQuestionToGroupURL = `${url}questions`;\nconst addQuestionReplyURL = `${url}answers`;\nconst getQuestionsURL = `${url}questions?filter_by_user_groups=true`;\nconst getQuestionsByGroupURL = `${url}questions?group_id=`;\nconst getAnswersURL = `${url}questions/`;\nconst deleteQuestionURL = `${url}questions`;\n\nexport const ADD_NEW_QUESTION = 'ADD_NEW_QUESTION';\nexport const LOAD_QUESTIONS_BY_GROUP = 'LOAD_QUESTIONS_BY_GROUP';\nexport const GET_GROUP_QUESTIONS_AFTER_REPLY = 'GET_GROUP_QUESTIONS_AFTER_REPLY';\nexport const ADD_QUESTION_REPLY = 'ADD_QUESTION_REPLY';\nexport const GET_QUESTIONS_AFTER_REPLY = 'GET_QUESTIONS_AFTER_REPLY';\nexport const GET_ANSWERS = 'GET_ANSWERS';\nexport const GET_SINGLE_QUESTION_AFTER_REPLY = 'GET_SINGLE_QUESTION_AFTER_REPLY';\nexport const GET_SINGLE_QUESTION = 'GET_SINGLE_QUESTION';\nexport const GET_SINGLE_GROUP_AFTER_REPLY = 'GET_SINGLE_GROUP_AFTER_REPLY';\nexport const EMPTY_LIST = 'EMPTY_LIST';\nexport const GET_QUESTIONS = 'GET_QUESTIONS';\nexport const ERROR = 'ERROR';\n\nconst headers = () => ({\n  'access-token': localStorage.getItem('access-token'),\n  uid: localStorage.getItem('uid'),\n  client: localStorage.getItem('client'),\n  id: localStorage.getItem('id')\n});\n\n\nexport const addQuestionReply = (reply, id, picture) => {\n  return(dispatch) => {\n    return Axios({\n      method: 'post',\n      url: addQuestionReplyURL,\n      headers: headers(),\n      data: {\n        \"answer\": {\n          \"question_id\": parseInt(id),\n          \"text\": reply,\n          \"picture\": ''\n        }\n      }\n    })\n    .then(response => {\n      if(response.status === 201) {\n        return Axios({\n          method: 'get',\n          url: getQuestionsURL,\n          headers: headers()\n        })\n        .then(response => {\n          dispatch({\n            type: GET_QUESTIONS_AFTER_REPLY,\n            questions: response.data.data\n          });\n        });\n      }\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport const addSingleGroupReply = (reply, id, groupID) => {\n  return(dispatch) => {\n    return Axios({\n      method: 'post',\n      url: addQuestionReplyURL,\n      headers: headers(),\n      data: {\n        \"answer\": {\n          \"question_id\": parseInt(id),\n          \"text\": reply,\n          \"picture\": ''\n        }\n      }\n    })\n    .then(response => {\n      console.log(groupID);\n      if(response.status === 201) {\n        return Axios({\n          method: 'get',\n          url: getQuestionsByGroupURL + groupID,\n          headers: headers()\n        })\n        .then(response => {\n          console.log(response.data.data);\n          dispatch({\n            type: GET_SINGLE_GROUP_AFTER_REPLY,\n            questions: response.data.data\n          });\n        });\n      }\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport const addSingleQuestionReply = (reply, id, picture) => {\n  return(dispatch) => {\n    return Axios({\n      method: 'post',\n      url: addQuestionReplyURL,\n      headers: headers(),\n      data: {\n        \"answer\": {\n          \"question_id\": parseInt(id),\n          \"text\": reply,\n          \"picture\": picture\n        }\n      }\n    })\n    .then(response => {\n      console.log(response.data.data);\n      if(response.status === 201) {\n        dispatch({\n          type: GET_SINGLE_QUESTION_AFTER_REPLY,\n          answers: response.data.data\n        });\n      }\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\n\nexport const addNewQuestion = (reply, id, picture) => {\n  let arrID = [];\n  arrID.push(JSON.parse(id));\n  return(dispatch) => {\n    return Axios({\n      method: 'post',\n      url: addNewQuestionToGroupURL,\n      headers: headers(),\n      data: {\n        \"question\": {\n          \"text\": reply,\n          \"group_of_interest_ids\": arrID,\n          \"question_type\": \"topic\",\n          \"picture\": picture\n        }\n      }\n    })\n    .then(response => {\n      if(response.status === 201){\n        return Axios({\n          method: 'get',\n          url: getQuestionsByGroupURL + id,\n          headers: headers()\n        })\n        .then(response => {\n          console.log(response);\n          dispatch({\n            type: LOAD_QUESTIONS_BY_GROUP,\n            questions: response.data.data\n          });\n        });\n      }\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\n\n\n\nexport const getAnswers = (id) => {\n  return(dispatch) => {\n    return Axios({\n      method: 'get',\n      url: getAnswersURL + id + `/answers`,\n      headers: headers()\n    })\n    .then(response => {\n      if(response.data.data.length === 0) {\n        dispatch({\n          type: EMPTY_LIST,\n          answers: response.data.data\n        });\n      }\n      dispatch({\n        type: GET_ANSWERS,\n        answers: response.data.data\n      });\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\nexport const getSingleQuestion = (id) => {\n  return(dispatch) => {\n    return Axios({\n      method: 'get',\n      url: getAnswersURL + id,\n      headers: headers()\n    })\n    .then(response => {\n      console.log(response);\n      dispatch({\n        type: GET_SINGLE_QUESTION,\n        question: response.data.data\n      });\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\n\n\nexport const editQuestion = (reply, questionID, groupID, where) => {\n  console.log(where);\n  return(dispatch) => {\n    return Axios({\n      method: 'put',\n      url: deleteQuestionURL + `/` + questionID,\n      headers: headers(),\n      data: reply,\n    })\n    .then(response => {\n      if(response.status === 204 && where === \"feed\") {\n        return Axios({\n          method: 'get',\n          url: getQuestionsURL,\n          headers: headers()\n        })\n        .then(response => {\n          dispatch({\n            type: GET_QUESTIONS,\n            questions: response.data.data\n          });\n        });\n      }\n      if(response.status === 204 && where === \"singleGroup\") {\n        return Axios({\n          method: 'get',\n          url: getQuestionsByGroupURL + groupID,\n          headers: headers()\n        })\n        .then(response => {\n          dispatch({\n            type: LOAD_QUESTIONS_BY_GROUP,\n            questions: response.data.data\n          });\n        });\n      }\n      if(response.status === 204 && where === \"singleQuestion\") {\n        return Axios({\n          method: 'get',\n          url: getAnswersURL + questionID,\n          headers: headers()\n        })\n        .then(response => {\n          console.log(response);\n          dispatch({\n            type: GET_SINGLE_QUESTION,\n            question: response.data.data\n          });\n        });\n      }\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};\n\nexport const deleteQuestion = (questionID, groupID, where) => {\n  return(dispatch) => {\n    return Axios({\n      method: 'delete',\n      url: deleteQuestionURL + `/` + questionID,\n      headers: headers()\n    })\n    .then(response => {\n      if(response.status === 204) {\n        if (where === \"singleGroup\") {\n          history.push(`/groups/${groupID}`);\n          return Axios({\n            method: 'get',\n            url: getQuestionsByGroupURL + groupID,\n            headers: headers()\n          })\n          .then(response => {\n            toast.success(`Topic Deleted`, {\n              position: toast.POSITION.TOP_CENTER,\n              hideProgressBar: true,\n            });\n            dispatch({\n              type: LOAD_QUESTIONS_BY_GROUP,\n              questions: response.data.data\n            });\n          });\n\n        }\n        if(where === \"feed\") {\n          history.push(`/feed`);\n          return Axios({\n            method: 'get',\n            url: getQuestionsURL,\n            headers: headers()\n          })\n          .then(response => {\n            toast.success(`Topic Deleted`, {\n              position: toast.POSITION.TOP_CENTER,\n              hideProgressBar: true,\n            });\n            dispatch({\n              type: GET_QUESTIONS,\n              questions: response.data.data\n            });\n          });\n        }\n        if(where === \"singleQuestion\") {\n          history.push(`/feed`);\n          return Axios({\n            method: 'get',\n            url: getQuestionsURL,\n            headers: headers()\n          })\n          .then(response => {\n            toast.success(`Topic Deleted`, {\n              position: toast.POSITION.TOP_CENTER,\n              hideProgressBar: true,\n            });\n            dispatch({\n              type: GET_QUESTIONS,\n              questions: response.data.data\n            });\n          });\n        }\n      }\n    })\n    .catch(err => {\n      console.log(err);\n      dispatch({\n        type: ERROR,\n        error: err\n      });\n    });\n  };\n};"]},"metadata":{},"sourceType":"module"}