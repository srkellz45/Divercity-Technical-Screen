{"ast":null,"code":"import _classCallCheck from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/LinkedIn/LinkedIn.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport linkedin from '../../assets/LinkedIn.png';\nexport var LinkedIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LinkedIn, _Component);\n\n  function LinkedIn() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LinkedIn);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LinkedIn)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.getUrl = function () {\n      var _this$props = _this.props,\n          redirectUri = _this$props.redirectUri,\n          clientId = _this$props.clientId,\n          state = _this$props.state,\n          scope = _this$props.scope; // TODO: Support IE 11\n\n      var scopeParam = scope ? \"&scope=\".concat(encodeURI(scope)) : '&scope=r_liteprofile%20r_emailaddress%20w_member_social';\n      var linkedInAuthenLink = \"https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=\".concat(clientId, \"&redirect_uri=\").concat(redirectUri).concat(scopeParam, \"&state=\").concat(state);\n      return linkedInAuthenLink;\n    };\n\n    _this.receiveMessage = function (event) {\n      if (event.origin === window.location.origin) {\n        if (event.data.errorMessage && event.data.from === 'Linked In') {\n          _this.props.onFailure(event.data);\n\n          _this.popup && _this.popup.close();\n        } else if (event.data.code && event.data.from === 'Linked In') {\n          console.log(event.data.code);\n\n          _this.props.onSuccess({\n            code: event.data.code\n          });\n\n          _this.popup && _this.popup.close();\n        }\n      }\n    };\n\n    _this.handleConnectLinkedInClick = function (e) {\n      if (e) {\n        e.preventDefault();\n      }\n\n      _this.props.onClick && _this.props.onClick();\n      _this.popup = window.open(_this.getUrl(), '_blank', 'width=600,height=650');\n      window.removeEventListener('message', _this.receiveMessage, false);\n      window.addEventListener('message', _this.receiveMessage, false);\n    };\n\n    return _this;\n  }\n\n  _createClass(LinkedIn, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('message', this.receiveMessage, false);\n      if (this.popup && !this.popup.closed) this.popup.close();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        onClick: this.handleConnectLinkedInClick,\n        className: \"LinkedIn-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: linkedin,\n        alt: \"LinkedIn Login\",\n        \"aria-label\": \"Login with LinkedIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return LinkedIn;\n}(Component);\nLinkedIn.propTypes = {\n  className: PropTypes.string,\n  onFailure: PropTypes.func.isRequired,\n  onSuccess: PropTypes.func.isRequired,\n  onClick: PropTypes.func,\n  disabled: PropTypes.bool,\n  clientId: PropTypes.string.isRequired,\n  redirectUri: PropTypes.string.isRequired\n};\nexport default LinkedIn;","map":{"version":3,"sources":["/Users/seanromero/Documents/web-projects/personal-projects/divercity-coding-challenge/divercity/src/containers/LinkedIn/LinkedIn.js"],"names":["React","Component","PropTypes","linkedin","LinkedIn","getUrl","props","redirectUri","clientId","state","scope","scopeParam","encodeURI","linkedInAuthenLink","receiveMessage","event","origin","window","location","data","errorMessage","from","onFailure","popup","close","code","console","log","onSuccess","handleConnectLinkedInClick","e","preventDefault","onClick","open","removeEventListener","addEventListener","closed","propTypes","className","string","func","isRequired","disabled","bool"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport linkedin from '../../assets/LinkedIn.png';\n\nexport class LinkedIn extends Component {\n  static propTypes = {\n    className: PropTypes.string,\n    onFailure: PropTypes.func.isRequired,\n    onSuccess: PropTypes.func.isRequired,\n    onClick: PropTypes.func,\n    disabled: PropTypes.bool,\n    clientId: PropTypes.string.isRequired,\n    redirectUri: PropTypes.string.isRequired,\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('message', this.receiveMessage, false);\n    if (this.popup && !this.popup.closed) this.popup.close();\n  }\n\n  getUrl = () => {\n    const {redirectUri, clientId, state, scope} = this.props;\n    // TODO: Support IE 11\n    const scopeParam = (scope) ? `&scope=${encodeURI(scope)}` : '&scope=r_liteprofile%20r_emailaddress%20w_member_social'\n    const linkedInAuthenLink = `https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=${clientId}&redirect_uri=${redirectUri}${scopeParam}&state=${state}`;\n    return linkedInAuthenLink;\n  }\n\n  receiveMessage = (event) => {\n    if (event.origin === window.location.origin) {\n      if (event.data.errorMessage && event.data.from === 'Linked In') {\n        this.props.onFailure(event.data);\n        this.popup && this.popup.close();\n      } else if (event.data.code && event.data.from === 'Linked In') {\n        console.log(event.data.code)\n        this.props.onSuccess({ code: event.data.code });\n        this.popup && this.popup.close();\n      }\n    }\n  };\n\n  handleConnectLinkedInClick = (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    this.props.onClick && this.props.onClick();\n    this.popup = window.open(this.getUrl(), '_blank', 'width=600,height=650');\n    window.removeEventListener('message', this.receiveMessage, false);\n    window.addEventListener('message', this.receiveMessage, false);\n  }\n\n\n  render() {\n    return (\n      <div onClick={this.handleConnectLinkedInClick} className=\"LinkedIn-btn\">\n          <img src={ linkedin } alt=\"LinkedIn Login\" aria-label=\"Login with LinkedIn\"/>\n      </div>\n\n    );\n  }\n}\n\nexport default LinkedIn;"]},"metadata":{},"sourceType":"module"}